# 补充性规格说明

## 修订历史

| 版本     | 日期          | 描述                                 | 作者         |
| -------- | ------------- | ------------------------------------ | ------------ |
| 初始草案 | 2031年1月10日 | 第一个草案。主要在细化阶段中进行精化 | Craig Larman |
|          |               |                                      |              |

## 简介

本文档记录了 **NextGen POS** 所有未在用例中描述的需求。

## 功能性

（通常跨越多个用例的功能性）

1. 日志和错误处理

    在持久性存储中记录所有错误。

2. 可插拔规则

    在几个用例（见定义）的不同场景点执行任意一组规则，以支持对系统功能的定制。

3. 安全性

    任何使用都需要经过用户认证。

## 可用性

人性因素

顾客将能够看到 **POS** 大屏幕显示器的显示。因此：

- 应该在1米外轻松看到文本。
- 避免使用一般色盲人群难以辨认的颜色。

快捷、无错的销售交易处理极为重要，因为购买者希望快速离开，否则会给他们的购买体验（和对销售员的评价）带来负面影响。

收银员的视线通常停留在顾客或商品，而不是计算机显示器上。因此，提示和告警应该通过声音传递而不仅仅是通过图像传递。

## 可靠性

1. 可恢复性

    如果在使用外部服务（支付授权、账务系统、......）时出现错误，为了完成销售交易，需要尝试采用本地方案（如存储和转发）加以解决。对此需要更深入的分析......

2. 性能

    正如“人性因素”一节中所提及的，购买者希望非常快速地完成销售处理过程。外部的支付授权是瓶颈之一。我们的目标是：90%的情况下，能够在1分钟之内完成授权。

## 可支持性

1. 可适应性

    **NextGen POS** 的不同客户在处理销售时有其特有的业务规则和处理需求。因此，在场景中的几个预定之处（例如，当开始新的销售交易时，当增加新的商品时），需要能够启用可插拔的业务规则。

2. 可配置性

    不同的客户对其 **POS** 系统有不同的网络配置需求，例如，采用胖客户端或瘦客户端，两层或多层物理结构等等。除此之外，他们还要求具备修改配置的能力，以便适应其变更业务和性能的需求。因此，系统应该具备一定的可配置能力以适应这些需求。对此需要进一步分析，以发现哪些地方需要灵活性和灵活性的程度，以及实现这种灵活性所需的工作。

## 实现约束

**NextGen** 的领导层坚持采用 **Java** 技术的解决方案，他们认为采用 **Java** 技术除了易于开发外，还能够提高远期的移植和可支持能力。

## 购买构件

- 税金计算机。必须支持用于不同国家的可插拔计算机。

## 免费开源构件

一般而言，我们建议在该项目中尽可能地使用免费的 **Java** 技术开源构件。

尽管现在对确定最终的设计和选择构件来说为时尚早，但是我们还是建议采用以下构件：

- **JLog** 日志框架
- ......

## 接口

1. 重要硬件和接口

- 触摸屏（操作系统将此视为普通监视器，且触摸动作也视为鼠标事件）。
- 条形码激光扫描仪（通常附加在一种特殊键盘上，扫描输入在软件中视为键盘输入）。
- 票据打印机。
- 信用卡/借记卡读卡器
- 签名读取装置。

2. 软件接口

    由于存在众多外部协作系统，我们需要采用不通过的接口，接入不同的系统。

## 应用的领域规则

（一般性规则参见单独的业务规则文档。）

| ID    | 规则                                                         | 可变性                                               | 来源       |
| ----- | ------------------------------------------------------------ | ---------------------------------------------------- | ---------- |
| 规则1 | 购买者折扣规则。示例：<br />员工：20%折扣额<br />优先顾客：10%折扣额<br />高级：15%折扣额 | 高<br />每个零售商有不同的规则                       | 零售商政策 |
| 规则2 | 销售（交易级）折扣规则适用于税前总额。示例：<br />如果超过100美元，折扣额为10%<br />每周一折扣额为5%<br />每天上午10点到下午3点的折扣额为10%<br />每天上午9点到上午10点，豆腐的折扣额为50% | 高<br />每个零售商有不同规则，每天或每小时都可能改变 | 零售商政策 |
| 规则3 | 产品（商品级）折扣规格。示例：<br />割草机本周折扣额为10%<br />汉堡买二送一 | 高<br />每个零售商有不同规则，每天或每小时都可能改变 | 零售商政策 |

## 法律问题

我们建议使用一些开源构件，但是要解决其许可限制的问题，以便使包含开源软件的产品能够转售。

法律规定，在销售交易中必须遵从所有税务规则。同时要注意的是，这些规则可以频繁变更。

## 所关注领域内的信息

1. 定价

2. 信用卡和借记卡支付处理

3. 销售税

4. 商品标识：UPC、EAN、SKU、条形码和条形码读取装置

    无论如何，UPC和EAN具有标准的受规章限制的构件。参见 www.adams1.com/pub/russadam/upccode.html 或者 www.uc-council.org 和 www.ean-int.org 获得详细信息。



# 设想

## 修订历史

| 版本     | 日期          | 描述                                 | 作者         |
| -------- | ------------- | ------------------------------------ | ------------ |
| 初始草案 | 2031年1月10日 | 第一个草案。主要在细化阶段中进行精华 | Craig Larman |
|          |               |                                      |              |

## 简介

我们设想 **NextGen POS** 是下一代 **POS** 应用，能够容错，具有灵活性以支持性各种客户的不同业务规则，具有多终端和用户接口机制，并且能够与各种第三方支持系统进行整合。

## 定位

1. 商业机遇

    就各种业务规则和网络设计而言（例如，瘦客户端或其他；两层、三层或四层架构），现有的 **POS** 产品无法适应客户的业务。此外，在业务和终端增长时，现有产品不能很好地扩展。而且，这些产品无法同时以在线和离线模式工作，不能动态地根据错误进行调整。现有产品都无法方便地与大量第三方系统集成。它们都不能采用新的终端技术，例如移动PDA。以上这些不灵活的情形无法满足市场的需要，因此需要一种 **POS** 来改变这种情形。

2. 问题综述

    传统的 **POS** 系统灵活性、容错性差，并且难以与第三方系统集成。这就带来诸多问题，包括无法快速完成销售流程、无法加入软件不支持的处理过程以及不能支持及时准确的账务和库存数据管理。这些问题会影响收银员、商店经理、系统管理员和企业管理人员。

3. 产品定位综述

    - 简洁地概括系统目标用户、出众的特性和与竞争者的差异。

4. 选择和竞争......

## 涉众描述

1. 市场统计......

2. 涉众（非用户）概要......

3. 用户概要......

4. 涉众的关键高阶目标及问题

    通过专题专家和其他涉众参加的为期一天的需求讨论会，和对一些零售店的调查，得出一下关键目标和问题：

    | 高阶目标                   | 优先级 | 相关问题                                                   | 当前解决方案                                            |
| -------------------------- | ------ | ---------------------------------------------------------- | ------------------------------------------------------- |
| 快速、健壮和整合的销售流程 | 高     | 负载增加时速度降低<br />如果有构件故障，则无法完成销售过程 | 现有的POS产品提供了基本的销售过程，但是没有解决这些问题 |
| ......                     | ...... | ......                                                     | ......                                                  |

5. 用户级目标

    用户（和外部系统）要求系统实现以下目标：

    - 收银员：处理销售交易、处理退货、入款、出款
    - 系统管理员：管理用户、安全性和系统表
    - 经理：启动和关闭
    - 销售活动系统：分析销售数据
    - ......

6. 用户环境......

## 产品概览

1. 产品展望

    **NextGen POS** 系统通常安装在商店中。如果使用移动终端，则可以在商店网络邻近的封闭区域内使用，包括商店内部或外部的封闭区域。系统能够与其他系统协作，为用户提供各种服务。

2. 优点概述

    | 支持的特性                                                   | 涉众利益                                                     |
    | ------------------------------------------------------------ | ------------------------------------------------------------ |
    | 从功能上说，系统能够提供销售组织需要的常见服务。包括记录销售、支付授权、退货处理等<br />自动检测错误，将无效服务切换到本地离线处理过程<br />在销售处理中的不同场景点可以插入业务规则<br />使用行业标准系统以，与第三方系统进行实时交易<br /><br />....... | 自动化、快速POS服务<br /><br />当外部构件发生故障时继续销售处理过程<br />灵活的业务逻辑配置<br />提供及时、准确的销售、账务和库存信息，以支持统计和计划<br />...... |
    
3. 假设和依赖.......

4. 成本和定价.......

5. 许可和安装.......

## 系统特性概要

- 记录销售交易
- 支付授权
- 对用户、安全性、编码和约束表等进行系统管理
- 当外部构件发生故障时，自动进行离线销售处理
- 基于行业标准，与第三方系统进行实时交易，这些第三方系统包括库存、账务、人力资源、税金计算器和支付授权服务等
- 在处理场景中固定、公共的设定点定义和执行定制的“可插拔”业务规则。
- .......

## 其他需求和约束

包括设计约束、可用性、可靠性、性能、可支持性、设计约束、文档、包装等。参加补充性规格说明和用例。



# 词汇表

## 修订历史

| 版本     | 日期          | 描述                                 | 作者         |
| -------- | ------------- | ------------------------------------ | ------------ |
| 初始草案 | 2031年1月10日 | 第一个草案。主要在细化阶段中进行精华 | Craig Larman |
|          |               |                                      |              |

## 定义

| 术语         | 定义和信息                                                   | 格式                         | 验证规则       | 别名         |
| ------------ | ------------------------------------------------------------ | ---------------------------- | -------------- | ------------ |
| 商品         | 用于销售的产品或服务                                         |                              |                |              |
| 支付授权     | 外部支付授权服务进行的验证活动，该服务将完成并保证对卖方的支付 |                              |                |              |
| 支付授权请求 | 电子地发送给授权服务的一组元素，通常是字符序列。元素包含：商店ID、顾客账号、总额和时间戳 |                              |                |              |
| UPC          | 标识产品的数字代码。通常以产品上的条形码来表示（格式和验证的详细信息可参见 www.uc-council.org ） | 分为几个子部分的12位数字代码 | 第12位是校验位 | 通用产品代码 |
| ......       | ......                                                       |                              |                |              |



# 业务规则（领域规则）

## 修订历史

| 版本     | 日期          | 描述                                 | 作者         |
| -------- | ------------- | ------------------------------------ | ------------ |
| 初始草案 | 2031年1月10日 | 第一个草案。主要在细化阶段中进行精化 | Craig Larman |
|          |               |                                      |              |

## 规则列表

（同时参见补充性规格说明中的特定应用规则。）

| ID    | 规则                                                         | 可变性                                                       | 来源                     |
| ----- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------ |
| 规则1 | 信用卡支付需要签名                                           | 可能会一直要求购买者“签名”，但是在两年内，大多数顾客希望在数字设备上记录签名，并且在5年内，我们预期需要支持现在美国法律所支持的新的唯一数字编码“签名” | 所有信用卡授权公司的政策 |
| 规则2 | 税务规则。销售中需要考虑税务事宜。当前详情参见政府公布的状况 | 高。各级政府每年都会变更税法                                 | 法律                     |
| 规则3 | 信用卡支付退款可能只对购买者的信用卡账户进行退款操作，而不是以现金退款 | 低                                                           | 信用卡授权公司的政策     |

